console.log("Options page loaded. No imports here.");const d=document.getElementById("auth-mode"),u=document.getElementById("token-section"),i=document.getElementById("login-section"),l=document.getElementById("save-token"),g=document.getElementById("teamId"),y=document.getElementById("memberId"),s=document.getElementById("status-token");l==null||l.addEventListener("click",()=>{const e=g.value,o=y.value;if(!e||!o){s.textContent="Erro: Preencha todos os campos.",s.style.color="red";return}chrome.storage.sync.set({authMode:"token",teamId:e,memberId:o},()=>{s.textContent="Modo Token salvo!",s.style.color="green",setTimeout(()=>{s.textContent=""},2e3)})});const r=document.getElementById("login-google"),a=document.getElementById("login-email"),m=document.getElementById("logout"),E=document.getElementById("email"),h=document.getElementById("password"),t=document.getElementById("status-auth");r==null||r.addEventListener("click",()=>{t.textContent="Abrindo pop-up do Google...",t.style.color="gray",chrome.runtime.sendMessage({type:"LOGIN_WITH_GOOGLE"},e=>{e.success?(n(e.user),chrome.storage.sync.set({authMode:"login"})):(t.textContent=`Erro: ${e.error}`,t.style.color="red")})});a==null||a.addEventListener("click",()=>{const e=E.value,o=h.value;if(!e||!o){t.textContent="Preencha email e senha.",t.style.color="red";return}t.textContent="Autenticando...",t.style.color="gray",chrome.runtime.sendMessage({type:"LOGIN_WITH_EMAIL",email:e,password:o},c=>{c.success?(n(c.user),chrome.storage.sync.set({authMode:"login"})):(t.textContent=`Erro: ${c.error}`,t.style.color="red")})});m==null||m.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"LOGOUT"},e=>{e.success?n(null):(t.textContent=`Erro: ${e.error}`,t.style.color="red")})});function I(e){e==="token"?(u.style.display="block",i.style.display="none"):(u.style.display="none",i.style.display="block")}d==null||d.addEventListener("change",e=>{const o=e.target.value;I(o),chrome.storage.sync.set({authMode:o})});function p(){chrome.storage.sync.get({authMode:"token",teamId:"",memberId:""},e=>{g.value=e.teamId,y.value=e.memberId,d.value=e.authMode,I(e.authMode)}),chrome.runtime.sendMessage({type:"GET_AUTH_STATE"},e=>{e.user?n(e.user):n(null)})}function n(e){e?(t.textContent=`Logado como: ${e.email}`,t.style.color="green"):(t.textContent="Você não está logado.",t.style.color="gray")}document.addEventListener("DOMContentLoaded",p);chrome.runtime.onMessage.addListener(e=>{e.type==="AUTH_STATE_CHANGED"&&n(e.user)});
